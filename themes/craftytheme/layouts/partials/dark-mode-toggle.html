{{/* Dark Mode Toggle Component */}}
{{ if .Site.Params.theme.enable_dark_mode }}
<div class="dark-mode-toggle">
  <button id="theme-toggle" class="{{ partial "theme-classes.html" (dict "context" . "type" "header" "variant" "nav") }} {{ partial "theme-classes.html" (dict "context" . "type" "header" "variant" "nav-hover") }} transition-colors p-2 rounded-md" aria-label="Toggle dark mode">
    <i id="theme-toggle-light-icon" class="fas fa-sun"></i>
    <i id="theme-toggle-dark-icon" class="fas fa-moon hidden"></i>
  </button>
</div>

<script>
(function() {
  const themeToggle = document.getElementById('theme-toggle');
  const lightIcon = document.getElementById('theme-toggle-light-icon');
  const darkIcon = document.getElementById('theme-toggle-dark-icon');
  
  function updateIcons() {
    if (document.documentElement.classList.contains('dark')) {
      lightIcon.classList.add('hidden');
      darkIcon.classList.remove('hidden');
    } else {
      lightIcon.classList.remove('hidden');
      darkIcon.classList.add('hidden');
    }
  }
  
  function toggleTheme() {
    if (document.documentElement.classList.contains('dark')) {
      document.documentElement.classList.remove('dark');
      localStorage.theme = 'light';
    } else {
      document.documentElement.classList.add('dark');
      localStorage.theme = 'dark';
    }
    updateIcons();
  }
  
  if (themeToggle) {
    themeToggle.addEventListener('click', toggleTheme);
    updateIcons();
  }
})();
</script>
{{ end }}
